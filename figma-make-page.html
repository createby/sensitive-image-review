<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Figma Make - AI Review</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
      background: #f5f5f5;
      min-height: 100vh;
      color: #1a1a1a;
    }

    /* 상단 바 */
    .header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 16px 24px;
      background: #fff;
      border-bottom: 1px solid #e5e5e5;
    }

    .logo {
      display: flex;
      align-items: center;
      gap: 10px;
      font-size: 18px;
      font-weight: 600;
      color: #1a1a1a;
    }

    .logo-icon {
      width: 28px;
      height: 28px;
      background: linear-gradient(135deg, #7c3aed 0%, #a78bfa 100%);
      clip-path: polygon(50% 0%, 100% 25%, 100% 75%, 50% 100%, 0% 75%, 0% 25%);
    }

    .header-actions {
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .btn {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 10px 18px;
      border: none;
      border-radius: 8px;
      font-size: 14px;
      font-weight: 500;
      cursor: pointer;
      font-family: inherit;
    }

    .btn-generate {
      background: #2563eb;
      color: #fff;
    }

    .btn-generate:hover {
      background: #1d4ed8;
    }

    .btn-approve {
      background: #16a34a;
      color: #fff;
    }

    .btn-approve:hover {
      background: #15803d;
    }

    .btn svg {
      width: 16px;
      height: 16px;
    }

    /* 메인 레이아웃 */
    .main {
      display: flex;
      gap: 24px;
      padding: 24px;
      max-width: 1200px;
      margin: 0 auto;
    }

    /* 카드 공통 */
    .card {
      background: #fff;
      border-radius: 12px;
      border: 1px solid #e5e5e5;
      overflow: hidden;
      flex: 1;
      display: flex;
      flex-direction: column;
    }

    /* 좌측: 업로드 이미지 */
    .card-upload {
      max-width: 400px;
    }

    .card-header {
      padding: 20px 20px 16px;
      border-bottom: 1px solid #f0f0f0;
      font-size: 16px;
      font-weight: 600;
    }

    .upload-area {
      flex: 1;
      min-height: 320px;
      margin: 20px;
      border: 2px dashed #d4d4d4;
      border-radius: 8px;
      background: #fafafa;
      display: flex;
      align-items: center;
      justify-content: center;
      color: #737373;
    }

    .upload-placeholder {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 12px;
    }

    .upload-placeholder svg {
      width: 48px;
      height: 48px;
      color: #a3a3a3;
    }

    /* 우측: AI 검토 결과 */
    .card-review {
      min-width: 0;
    }

    .card-review .card-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
    }

    .close-btn {
      width: 32px;
      height: 32px;
      border: none;
      background: transparent;
      border-radius: 6px;
      cursor: pointer;
      color: #737373;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .close-btn:hover {
      background: #f0f0f0;
      color: #1a1a1a;
    }

    .review-content {
      padding: 20px;
      display: flex;
      flex-direction: column;
      gap: 16px;
    }

    .review-subtitle {
      font-size: 14px;
      font-weight: 600;
      color: #525252;
      margin-bottom: 4px;
    }

    .review-item {
      font-size: 14px;
      line-height: 1.5;
    }

    .review-item strong {
      color: #1a1a1a;
    }

    .review-item .value {
      color: #404040;
    }

    .fit-badge {
      display: inline-block;
      padding: 6px 12px;
      border-radius: 6px;
      font-size: 14px;
      font-weight: 600;
      background: #dc2626;
      color: #fff;
    }

    .recommendation {
      font-size: 14px;
      line-height: 1.6;
      color: #404040;
    }

    .warning-box {
      display: flex;
      align-items: flex-start;
      gap: 12px;
      padding: 16px;
      background: #fef2f2;
      border: 1px solid #fecaca;
      border-radius: 8px;
      margin-top: 8px;
    }

    .warning-box svg {
      flex-shrink: 0;
      width: 20px;
      height: 20px;
      color: #dc2626;
    }

    .warning-box p {
      font-size: 14px;
      font-weight: 500;
      color: #1a1a1a;
      line-height: 1.5;
    }
  </style>
</head>
<body>
  <header class="header">
    <div class="logo">
      <div class="logo-icon"></div>
      <span>민감 이미지 검토</span>
    </div>
    <div class="header-actions" style="margin-left: auto; display: flex; gap: 8px;">
      <button type="button" class="btn btn-generate" id="md-search-btn">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M5 12h14M12 5l7 7-7 7"/>
        </svg>
        Generate
      </button>
      <script>
        // Generate 버튼을 누르면 md파일 부적합 결과값을 보여주게 하는 예시
        document.getElementById('md-search-btn').addEventListener('click', async function() {
          const resultBox = document.getElementById('md-search-result');
          if (!uploadedFile) {
            resultBox.textContent = "이미지를 우선 업로드 해주세요.";
            return;
          }
          resultBox.textContent = "MD 파일을 검색 중입니다...";

          // 부적합(예: 민감/적합하지 않음) 결과 예시
          setTimeout(() => {
            const fakeMdFileName = "example-review.md";
            const fakeMdContent = "이 이미지는 부적합한 요소가 포함되어 있습니다. 사용이 권장되지 않습니다.\n- 검토자: AI 시스템";
            // 결과값을 빨간색 강조와 함께 표시
            resultBox.innerHTML =
              `<span style="color:#dc2626;font-weight:700">[${fakeMdFileName}] 검색 결과:</span><br><br>` +
              `<span style="color:#b91c1c;white-space:pre-line">${fakeMdContent}</span>`;
          }, 1300);
        });
      </script>
      <button type="button" class="btn btn-approve" id="md-approve-btn">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M20 6L9 17l-5-5"/>
        </svg>
        승인
      </button>
      <script>
        document.getElementById('md-approve-btn').addEventListener('click', function() {
          // 페이지를 처음 상태(새로고침)로 되돌림
          window.location.href = window.location.pathname;
        });
      </script>
    </div>
    <div id="md-search-result" style="margin-top: 12px; font-size: 15px; color: #2563eb;"></div>
    <script>
      // 이미지 업로드와 버튼 상태 참고
      let uploadedFile = null;

      // detect uploaded image file
      document.getElementById('image-upload')?.addEventListener('change', function(e) {
        uploadedFile = e.target.files[0];
      });

      // md 파일 "검색" 버튼 클릭 시 실행되는 함수
      document.getElementById('md-search-btn').addEventListener('click', async function() {
        const resultBox = document.getElementById('md-search-result');
        if (!uploadedFile) {
          resultBox.textContent = "이미지를 우선 업로드 해주세요.";
          return;
        }
        resultBox.textContent = "MD 파일을 검색 중입니다...";

        // 실제 검색 로직 대체: (예시) md파일명과 내용 추출
        // 클라이언트로만 검색이 불가하므로, 데모용 임시 랜덤 텍스트
        // 실제 환경에서는 서버와 통신하여 md파일을 검색
        setTimeout(() => {
          // 가상 결과
          const fakeMdFileName = "example-review.md";
          const fakeMdContent = "이 이미지는 부적절한 요소가 없습니다. 사용이 승인되었습니다.\n- 검토자: AI 시스템";
          resultBox.textContent = `[${fakeMdFileName}] 검색 결과:\n\n${fakeMdContent}`;
        }, 1300);
      });
    </script>
  </header>

  <main class="main">
    <section class="card card-upload">
      <h2 class="card-header">Uploaded Image</h2>
      <div class="upload-area">
        <div class="upload-placeholder">
          <input type="file" id="image-upload" accept="image/*" style="display:none" />
          <label for="image-upload" style="cursor:pointer; display:flex; flex-direction:column; align-items:center;">
            <svg id="upload-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" style="width:40px;height:40px;">
              <rect x="3" y="3" width="18" height="18" rx="2"/>
              <circle cx="8.5" cy="8.5" r="1.5"/>
              <path d="M21 15l-5-5L5 21"/>
            </svg>
            <span id="upload-text" style="font-align: center; margin-top: 8px;" ><u>이미지 첨부하기</u></span>
            <img id="preview-image" src="" alt="미리보기" style="display:none;margin-top:8px;max-width:160px;border-radius:8px;border:1px solid #e5e7eb;" />
          </label>
          <script>
            const input = document.getElementById('image-upload');
            const preview = document.getElementById('preview-image');
            const text = document.getElementById('upload-text');
            const icon = document.getElementById('upload-icon');

            input.addEventListener('change', (e) => {
              const file = e.target.files[0];
              if (file && file.type.startsWith('image/')) {
                const reader = new FileReader();
                reader.onload = function(ev) {
                  preview.src = ev.target.result;
                  preview.style.display = 'block';
                  text.innerHTML = '이미지가 업로드되었습니다';
                  icon.style.display = 'none';
                }
                reader.readAsDataURL(file);
              }
            });
          </script>
        </div>
      </div>
    </section>

    <section class="card card-review">
      <div class="card-header">
        <h2>AI Review Results</h2>
        <button type="button" class="close-btn" aria-label="닫기">
          <svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M18 6L6 18M6 6l12 12"/>
          </svg>
        </button>
      </div>
      <div class="review-content">
        <p class="review-subtitle">검토 결과 요약</p>

        <div class="review-risk">
          <strong>① 위험 요소:</strong>
          <span class="value">이미지를 업로드하면 AI가 자동으로 검토 결과를 제공합니다.</span>
        </div>

        <div class="review-misunderstanding">
          <strong>② 오해 소지:</strong>
          <span class="value">이미지를 첨부해주세요.</span>
        </div>

        <div class="review-type">
          <strong>③ 문제 유형:</strong>
          <span class="value">분석 전</span>
        </div>

        <div class="review-fit">
          <strong>④ 회사 키비주얼 사용 적합성:</strong>
          <span class="fit-badge">분석 전</span>
        </div>

        <div class="review-item">
          <strong>⑤ 수정 또는 재생성 권고 사항:</strong>
          <p class="recommendation">AI 분석 결과가 이곳에 표시됩니다.</p>
        </div>

        <div class="warning-box">
          <svg viewBox="0 0 24 24" fill="currentColor">
            <path d="M12 2L1 21h22L12 2zm0 3.99L19.53 19H4.47L12 5.99zM11 10v4h2v-4h-2zm0 6v2h2v-2h-2z"/>
          </svg>
          <p><strong>▲ 안내:</strong> 이미지를 업로드하면 AI 리뷰 결과가 여기에 표시됩니다.</p>
        </div>
      </div>
      <script>
        // 검토 결과 케이스 예시 (CASE 01: 성별 대립 구도) - 결과값(표준) md 기준
        const aiResult = {
          // 표준 결과값 필드명에 맞게 정확히 매핑
          위험요소: "있음 — 남 vs 여 대립 구도가 명확하여 갈등을 직접적으로 유발할 수 있음",
          오해소지: "높음",
          문제유형: "젠더 갈등 / 성별 대립",
          회사키비주얼사용적합성: "부적합",
          수정또는재생성권고사항: [
            "성별 간 대치 구도 제거(분할/번개/손가락질/공격 제스처 삭제)",
            "협업/중립 상황으로 재구성(동일 목표, 같은 방향 시선)",
            "인물 대신 추상 아이콘/그래픽으로 대체"
          ].join(", ")
        };

        // 실제로는 AI 분석 후 콜백으로 실행, 예시로 'DOMContentLoaded' 후 버튼에 이벤트 연결
        document.addEventListener("DOMContentLoaded", () => {
          const generateBtn = document.querySelector('.btn-generate');
          // review 영역 내 각 요소 참조
          const reviewRoot = document.querySelector('.review-content');
          // 더 명확하게 매칭을 위해 각 review-item마다 별도의 고유 class를 추가한다고 가정
          const resultMap = {
            위험요소: reviewRoot.querySelector(".review-risk .value"),
            오해소지: reviewRoot.querySelector(".review-misunderstanding .value"),
            문제유형: reviewRoot.querySelector(".review-type .value"),
            회사키비주얼사용적합성: reviewRoot.querySelector(".review-fit .fit-badge"),
            수정또는재생성권고사항: reviewRoot.querySelector(".review-item .recommendation"),
          };

          generateBtn && generateBtn.addEventListener('click', () => {
            resultMap.위험요소.textContent = aiResult.위험요소;
            resultMap.오해소지.textContent = aiResult.오해소지;
            resultMap.문제유형.textContent = aiResult.문제유형;
            resultMap.회사키비주얼사용적합성.textContent = aiResult.커버적합;
            resultMap.수정또는재생성권고사항.textContent = aiResult.권고;
          });
        });
      </script>
    </section>
  </main>
</body>
</html>
<script>